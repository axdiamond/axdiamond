<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPS Nanosecond Time Converter - GPS Time Utilities</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Free GPS nanosecond time converter utility. Convert between GPS time, UTC datetime, Unix milliseconds, and GPS nanoseconds. Essential tool for GPS navigation, satellite systems, and precision timing applications.">
    <meta name="keywords" content="GPS time converter, GPS nanoseconds, GPS milliseconds, UTC to GPS, GPS utilities, GPS time tools, navigation time converter, GPS epoch converter, satellite time conversion, Unix time to GPS, GPS datetime converter, precision timing, GPS leap seconds, time conversion utility, GPS navigation tools">
    <meta name="author" content="GPS Utilities">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="GPS Nanosecond Time Converter - GPS Time Utilities">
    <meta property="og:description" content="Convert between GPS time, UTC datetime, and Unix milliseconds. Free GPS nanosecond converter for navigation and satellite systems.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://axdiamond.github.io/gpsnanos.html">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="GPS Nanosecond Time Converter">
    <meta name="twitter:description" content="Convert between GPS time, UTC datetime, and Unix milliseconds. Free GPS utilities tool.">
    
    <!-- Additional SEO -->
    <link rel="canonical" href="https://axdiamond.github.io/gpsnanos.html">
    <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/plugins/font-awesome/css/all.min.css">
    <style>
        body {
            font-family: 'Roboto', Arial, sans-serif;
            min-height: 100vh;
            padding: 20px 0;
            background-color: #1a1a1a;
            color: #e0e0e0;
        }

        .container {
            max-width: 1200px;
        }

        h1 {
            color: #ffffff;
        }

        .card {
            margin-bottom: 20px;
            padding: 5px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
            background-color: #2a2a2a;
            border: 1px solid #3a3a3a;
        }

        .card-body {
            background-color: #2a2a2a;
        }

        .btn-primary {
            background-color: #4a90e2;
            border: none;
            color: #ffffff;
        }

        .btn-primary:hover {
            background-color: #3a7bc8;
        }
        
        .btn-outline-secondary {
            background-color: #3a3a3a;
            border: 1px solid #4a4a4a;
            color: #e0e0e0;
        }

        .btn-outline-secondary:hover {
            background-color: #4a4a4a;
            border-color: #5a5a5a;
            color: #ffffff;
        }
        
        .btn-utility {
            margin-bottom: 5px;
        }

        .form-group {
            margin-top: 5px;
            margin-bottom: 15px;
        }

        .form-control {
            background-color: #1a1a1a;
            border: 1px solid #4a4a4a;
            color: #e0e0e0;
        }

        .form-control:focus {
            background-color: #252525;
            border-color: #4a90e2;
            color: #ffffff;
            box-shadow: 0 0 0 0.2rem rgba(74, 144, 226, 0.25);
        }

        .form-control::placeholder {
            color: #6a6a6a;
        }

        .result-display {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            word-break: break-all;
            color: #4af;
            border: 1px solid #3a3a3a;
        }

        .info-box {
            background: #2a3a4a;
            padding: 15px;
            border-left: 4px solid #4a90e2;
            margin-bottom: 15px;
            color: #e0e0e0;
        }

        .current-time-display {
            font-size: 24px;
            font-weight: bold;
            color: #4af;
        }

        .label-text {
            font-weight: 600;
            color: #b0b0b0;
            margin-bottom: 5px;
        }

        .relative-time {
            color: #5cb85c;
            font-weight: bold;
        }

        .text-muted {
            color: #7a7a7a !important;
        }

        .clickable-display {
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .clickable-display:hover {
            background: #252525 !important;
            transform: scale(1.02);
            box-shadow: 0 2px 4px rgba(74, 144, 226, 0.3);
            border-color: #4a90e2;
        }

        .clickable-display::after {
            content: 'ðŸ“‹ Click to copy';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 12px;
            color: #8a8a8a;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .clickable-display:hover::after {
            opacity: 1;
        }

        .copy-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #5cb85c;
            color: white;
            padding: 12px 20px;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
            z-index: 9999;
            animation: slideIn 0.3s ease, slideOut 0.3s ease 2.7s;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }

        .current-time-display {
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .current-time-display:hover {
            transform: scale(1.05);
            text-shadow: 0 2px 8px rgba(68, 170, 255, 0.6);
        }

        hr {
            border-color: #3a3a3a;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1 class="text-center mb-4">
            GPS Nanosecond Time Converter
        </h1>

        <!-- Current GPS Time Display -->
        <div class="card">
            <div class="card-body text-center">
                <div class="current-time-display" id="currentGpsNs" onclick="copyToClipboard(this.textContent, 'GPS Nanoseconds')" title="Click to copy">Loading...</div>
                <p class="text-muted mb-0">Nanoseconds since GPS epoch (click to copy)</p>
                <hr>
                <div id="currentUtcTime" class="mt-2"></div>
                <div id="currentGpsTime" class="mt-2"></div>
            </div>
        </div>

        <div class="row">
            <!-- DateTime to GPS NS Converter -->
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <div class="form-group">
                            <label class="label-text">Select Date & Time (UTC):</label>
                            <input type="datetime-local" class="form-control" id="datetimeInput" step="0.001">
                        </div>
                        <div class="btn-group-sm mb-3 btn-utility" role="group">
                            <button class="btn btn-outline-secondary btn-sm mr-1 mb-1" onclick="adjustDateTime(-24, 'hours')" title="Subtract 24 hours">
                                -24 hr
                            </button>
                            <button class="btn btn-outline-secondary btn-sm mr-1 mb-1" onclick="adjustDateTime(24, 'hours')" title="Add 24 hours">
                                +24 hr
                            </button>
                            <button class="btn btn-outline-secondary btn-sm mr-1 mb-1" onclick="adjustDateTime(-1, 'hours')" title="Subtract 1 hour">
                                -1 hr
                            </button>
                            <button class="btn btn-outline-secondary btn-sm mr-1 mb-1" onclick="adjustDateTime(1, 'hours')" title="Add 1 hour">
                                +1 hr
                            </button>
                            <button class="btn btn-outline-secondary btn-sm mr-1 mb-1" onclick="adjustDateTime(-5, 'minutes')" title="Subtract 1 hour">
                                -5 min
                            </button>
                            <button class="btn btn-outline-secondary btn-sm mr-1 mb-1" onclick="adjustDateTime(5, 'minutes')" title="Add 1 hour">
                                +5 min
                            </button>
                            <button class="btn btn-outline-secondary btn-sm mr-1 mb-1" onclick="setToZeroMinutes()" title="Set minutes and seconds to :00">
                                :00
                            </button>
                            <button class="btn btn-outline-secondary btn-sm mb-1" onclick="setToZeroMilliseconds()" title="Set milliseconds to .000">
                                .000
                            </button>
                        </div>
                        <button class="btn btn-primary btn-block" onclick="convertDateTimeToGps()">
                            Convert to GPS NS
                        </button>
                        
                        <div class="mt-4">
                            <div class="form-group">
                                <label class="label-text">Or Enter Unix Milliseconds:</label>
                                <input type="text" class="form-control" id="unixMsInput"
                                    placeholder="e.g., 1730058000000">
                            </div>
                            <button class="btn btn-primary btn-block" onclick="convertUnixMsToGps()">
                                Convert Unix MS to GPS NS
                            </button>
                        </div>
                        <hr>
                        <div id="dt2gpsResult"></div>
                    </div>
                </div>
            </div>

            <!-- GPS NS to DateTime Converter -->
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <div class="form-group">
                            <label class="label-text">Enter GPS Nanoseconds/GPS Milliseconds:</label>
                            <input type="text" class="form-control" id="gpsNsInput"
                                placeholder="e.g., 1435708818000000000">
                        </div>
                        <button class="btn btn-primary btn-block" onclick="convertGpsToDateTime()">
                            Convert to DateTime
                        </button>
                        <hr>
                        <div id="gps2dtResult"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="assets/plugins/jquery-1.11.3.min.js"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script>
        // GPS epoch: January 6, 1980 00:00:00 UTC
        const GPS_EPOCH = new Date('1980-01-06T00:00:00.000Z');
        const GPS_EPOCH_MS = GPS_EPOCH.getTime();

        // Leap seconds table (UTC - GPS)
        // GPS time does not have leap seconds, UTC does
        // As of 2025, there are 18 leap seconds
        const LEAP_SECONDS = [
            { date: new Date('1981-07-01T00:00:00.000Z'), leaps: 1 },
            { date: new Date('1982-07-01T00:00:00.000Z'), leaps: 2 },
            { date: new Date('1983-07-01T00:00:00.000Z'), leaps: 3 },
            { date: new Date('1985-07-01T00:00:00.000Z'), leaps: 4 },
            { date: new Date('1988-01-01T00:00:00.000Z'), leaps: 5 },
            { date: new Date('1990-01-01T00:00:00.000Z'), leaps: 6 },
            { date: new Date('1991-01-01T00:00:00.000Z'), leaps: 7 },
            { date: new Date('1992-07-01T00:00:00.000Z'), leaps: 8 },
            { date: new Date('1993-07-01T00:00:00.000Z'), leaps: 9 },
            { date: new Date('1994-07-01T00:00:00.000Z'), leaps: 10 },
            { date: new Date('1996-01-01T00:00:00.000Z'), leaps: 11 },
            { date: new Date('1997-07-01T00:00:00.000Z'), leaps: 12 },
            { date: new Date('1999-01-01T00:00:00.000Z'), leaps: 13 },
            { date: new Date('2006-01-01T00:00:00.000Z'), leaps: 14 },
            { date: new Date('2009-01-01T00:00:00.000Z'), leaps: 15 },
            { date: new Date('2012-07-01T00:00:00.000Z'), leaps: 16 },
            { date: new Date('2015-07-01T00:00:00.000Z'), leaps: 17 },
            { date: new Date('2017-01-01T00:00:00.000Z'), leaps: 18 }
        ];

        // Copy to clipboard function
        function copyToClipboard(text, label) {
            navigator.clipboard.writeText(text).then(() => {
                showCopyNotification(label || 'Value');
            }).catch(err => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    showCopyNotification(label || 'Value');
                } catch (err) {
                    alert('Failed to copy to clipboard');
                }
                document.body.removeChild(textArea);
            });
        }

        // Show copy notification
        function showCopyNotification(label) {
            const notification = document.createElement('div');
            notification.className = 'copy-notification';
            notification.innerHTML = `<i class="fas fa-check-circle"></i> ${label} copied to clipboard!`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                document.body.removeChild(notification);
            }, 3000);
        }

        // Get leap seconds for a given UTC date
        function getLeapSeconds(utcDate) {
            let leaps = 0;
            for (let i = LEAP_SECONDS.length - 1; i >= 0; i--) {
                if (utcDate >= LEAP_SECONDS[i].date) {
                    leaps = LEAP_SECONDS[i].leaps;
                    break;
                }
            }
            return leaps;
        }

        // Convert UTC datetime to GPS nanoseconds
        function utcToGpsNs(utcDate) {
            const utcMs = utcDate.getTime();
            const leapSeconds = getLeapSeconds(utcDate);
            const gpsDiffMs = utcMs - GPS_EPOCH_MS;
            const gpsDiffSec = gpsDiffMs / 1000 + leapSeconds;
            return BigInt(Math.floor(gpsDiffSec * 1e9));
        }

        // Convert GPS nanoseconds to UTC datetime
        function gpsNsToUtc(gpsNs) {
            const gpsNsNum = BigInt(gpsNs);
            const gpsSeconds = Number(gpsNsNum / BigInt(1e9));
            const gpsNanos = Number(gpsNsNum % BigInt(1e9));

            // Start with GPS time (no leap seconds)
            let utcMs = GPS_EPOCH_MS + (gpsSeconds * 1000);
            let testDate = new Date(utcMs);

            // Subtract leap seconds to get UTC
            const leapSeconds = getLeapSeconds(testDate);
            utcMs = GPS_EPOCH_MS + (gpsSeconds * 1000) - (leapSeconds * 1000);

            const utcDate = new Date(utcMs);
            const ms = Math.floor(gpsNanos / 1e6);

            return new Date(utcDate.getTime() + ms);
        }

        // Format relative time
        function formatRelativeTime(ns) {
            const totalSeconds = Number(BigInt(ns) / BigInt(1e9));
            const days = Math.floor(totalSeconds / 86400);
            const hours = Math.floor((totalSeconds % 86400) / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;

            let parts = [];
            if (days > 0) parts.push(`${days} day${days !== 1 ? 's' : ''}`);
            if (hours > 0) parts.push(`${hours} hour${hours !== 1 ? 's' : ''}`);
            if (minutes > 0) parts.push(`${minutes} minute${minutes !== 1 ? 's' : ''}`);
            if (seconds > 0 || parts.length === 0) parts.push(`${seconds} second${seconds !== 1 ? 's' : ''}`);

            return parts.join(', ');
        }

        // Adjust datetime input by specified amount
        function adjustDateTime(amount, unit) {
            const input = document.getElementById('datetimeInput');
            if (!input.value) {
                alert('Please select a date and time first');
                return;
            }
            
            const currentDate = new Date(input.value + 'Z');
            
            if (unit === 'hours') {
                currentDate.setHours(currentDate.getHours() + amount);
            } else if (unit === 'minutes') {
                currentDate.setMinutes(currentDate.getMinutes() + amount);
            } 
            
            input.value = currentDate.toISOString().slice(0, 23);
        }

        // Set minutes and seconds to zero
        function setToZeroMinutes() {
            const input = document.getElementById('datetimeInput');
            if (!input.value) {
                alert('Please select a date and time first');
                return;
            }
            
            const currentDate = new Date(input.value + 'Z');
            currentDate.setMinutes(0, 0, 0);
            input.value = currentDate.toISOString().slice(0, 23);
        }

        // Set milliseconds to zero
        function setToZeroMilliseconds() {
            const input = document.getElementById('datetimeInput');
            if (!input.value) {
                alert('Please select a date and time first');
                return;
            }
            
            const currentDate = new Date(input.value + 'Z');
            currentDate.setMilliseconds(0);
            input.value = currentDate.toISOString().slice(0, 23);
        }

        // Update current GPS time
        function updateCurrentGpsTime() {
            const now = new Date();
            const gpsNs = utcToGpsNs(now);
            document.getElementById('currentGpsNs').textContent = gpsNs;

            const leapSeconds = getLeapSeconds(now);
            const gpsTime = new Date(now.getTime() + (leapSeconds * 1000));

            document.getElementById('currentUtcTime').innerHTML =
                `<strong>UTC:</strong> ${now.toISOString()}`;
            document.getElementById('currentGpsTime').innerHTML =
                `<strong>GPS Time:</strong> ${gpsTime.toISOString()} <small class="text-muted">(+${leapSeconds}s)</small>`;
        }

        // Convert datetime to GPS NS
        function convertDateTimeToGps() {
            const input = document.getElementById('datetimeInput').value;
            if (!input) {
                alert('Please select a date and time');
                return;
            }

            const utcDate = new Date(input + 'Z'); // Ensure UTC
            const gpsNs = utcToGpsNs(utcDate);
            const leapSeconds = getLeapSeconds(utcDate);
            
            // Calculate GPS milliseconds (GPS NS / 1,000,000)
            const gpsMs = Number(gpsNs / BigInt(1e6));
            
            // Calculate Unix milliseconds (milliseconds since Unix epoch)
            const unixMs = utcDate.getTime();

            const relative = formatRelativeTime(gpsNs);

            document.getElementById('dt2gpsResult').innerHTML = `
                <div class="label-text">GPS Nanoseconds:</div>
                <div class="result-display clickable-display" onclick="copyToClipboard('${gpsNs}', 'GPS Nanoseconds')" title="Click to copy">${gpsNs}</div>
                <div class="label-text mt-3">GPS Milliseconds:</div>
                <div class="result-display clickable-display" onclick="copyToClipboard('${gpsMs}', 'GPS Milliseconds')" title="Click to copy">${gpsMs}</div>
                <div class="label-text mt-3">Unix Milliseconds:</div>
                <div class="result-display clickable-display" onclick="copyToClipboard('${unixMs}', 'Unix Milliseconds')" title="Click to copy">${unixMs}</div>
            `;
        }

        // Convert Unix milliseconds to GPS NS
        function convertUnixMsToGps() {
            const input = document.getElementById('unixMsInput').value.replace(/,/g, '');
            if (!input) {
                alert('Please enter Unix milliseconds');
                return;
            }

            try {
                const unixMs = parseInt(input);
                if (isNaN(unixMs)) {
                    alert('Invalid Unix milliseconds value');
                    return;
                }

                const utcDate = new Date(unixMs);
                const gpsNs = utcToGpsNs(utcDate);
                const leapSeconds = getLeapSeconds(utcDate);
                
                // Calculate GPS milliseconds (GPS NS / 1,000,000)
                const gpsMs = Number(gpsNs / BigInt(1e6));

                const relative = formatRelativeTime(gpsNs);
                const utcIso = utcDate.toISOString();
                const localStr = utcDate.toString();

                document.getElementById('dt2gpsResult').innerHTML = `
                    <div class="label-text">GPS Nanoseconds:</div>
                    <div class="result-display clickable-display" onclick="copyToClipboard('${gpsNs}', 'GPS Nanoseconds')" title="Click to copy">${gpsNs}</div>
                    <div class="label-text mt-3">GPS Milliseconds:</div>
                    <div class="result-display clickable-display" onclick="copyToClipboard('${gpsMs}', 'GPS Milliseconds')" title="Click to copy">${gpsMs}</div>
                    <div class="label-text mt-3">Unix Milliseconds:</div>
                    <div class="result-display clickable-display" onclick="copyToClipboard('${unixMs}', 'Unix Milliseconds')" title="Click to copy">${unixMs}</div>
                    <div class="label-text mt-3">UTC DateTime:</div>
                    <div class="result-display clickable-display" onclick="copyToClipboard('${utcIso}', 'UTC DateTime')" title="Click to copy">${utcIso}</div>
                    <div class="label-text mt-3">Local DateTime:</div>
                    <div class="result-display clickable-display" onclick="copyToClipboard('${localStr.replace(/'/g, "\\'")}', 'Local DateTime')" title="Click to copy">${localStr}</div>
                `;
            } catch (e) {
                alert(`That number looks a little funny, are you sure that is a Unix millis value? \n[${input}]`);
            }
        }

        function updateTimestampQueryParam(value) {
            const url = new URL(window.location.href);
            if (value) {
                url.searchParams.set('t', value);
            } else {
                url.searchParams.delete('t');
            }
            window.history.replaceState({}, '', url.toString());
        }

        // Convert GPS NS to datetime
        function convertGpsToDateTime() {
            let input = document.getElementById('gpsNsInput').value.replace(/,/g, '');
            if (!input) {
                alert('Please enter GPS nanoseconds');
                return;
            }

            try {
                let gpsNs = BigInt(input);
                
                // Auto-detect GPS milliseconds and convert to nanoseconds
                // GPS milliseconds are typically 13 digits, GPS nanoseconds are 19 digits
                const inputLength = input.length;
                let wasConverted = false;
                
                if (inputLength <= 13) {
                    // Likely GPS milliseconds, convert to nanoseconds
                    gpsNs = gpsNs * BigInt(1e6);
                    wasConverted = true;
                }
                
                const utcDate = gpsNsToUtc(gpsNs);
                const leapSeconds = getLeapSeconds(utcDate);
                
                updateTimestampQueryParam(gpsNs.toString());

                // Calculate GPS milliseconds (GPS NS / 1,000,000)
                const gpsMs = Number(gpsNs / BigInt(1e6));
                
                // Calculate Unix milliseconds (milliseconds since Unix epoch)
                const unixMs = utcDate.getTime();

                const relative = formatRelativeTime(gpsNs);
                
                // Use moment.js for better relative time formatting
                const timeAgo = moment(utcDate).fromNow();

                const utcIso = utcDate.toISOString();
                const localStr = utcDate.toString();
                
                document.getElementById('gps2dtResult').innerHTML = `
                    <div class="label-text">GPS Nanoseconds:</div>
                    <div class="result-display clickable-display" onclick="copyToClipboard('${gpsNs}', 'GPS Nanoseconds')" title="Click to copy">${gpsNs}</div>
                    <div class="label-text mt-3">UTC DateTime:</div>
                    <div class="result-display clickable-display" onclick="copyToClipboard('${utcIso}', 'UTC DateTime')" title="Click to copy">${utcIso}</div>
                    <div class="label-text mt-3">Local DateTime:</div>
                    <div class="result-display clickable-display" onclick="copyToClipboard('${localStr.replace(/'/g, "\\'")}', 'Local DateTime')" title="Click to copy">${localStr}</div>
                    <div class="label-text mt-3">GPS Milliseconds:</div>
                    <div class="result-display clickable-display" onclick="copyToClipboard('${gpsMs}', 'GPS Milliseconds')" title="Click to copy">${gpsMs}</div>
                    <div class="label-text mt-3">Unix Milliseconds:</div>
                    <div class="result-display clickable-display" onclick="copyToClipboard('${unixMs}', 'Unix Milliseconds')" title="Click to copy">${unixMs}</div>
                    <div class="label-text mt-3">Relative to Now:</div>
                    <div class="result-display clickable-display relative-time" onclick="copyToClipboard('${timeAgo}', 'Relative Time')" title="Click to copy">${timeAgo}</div>
                `;
            } catch (e) {
                alert('Invalid GPS nanosecond value: ' + e.message);
            }
        }

        // Initialize
        updateCurrentGpsTime();
        setInterval(updateCurrentGpsTime, 100); // Update 10 times per second

        // Set current time as default
        const now = new Date()
        now.setMilliseconds(0);
        document.getElementById('datetimeInput').value = now.toISOString().slice(0, 23);

        // Hide result divs when input values change
        var datetimeInputValue = "";
        document.getElementById('datetimeInput').addEventListener('input', (e) => {
            const newValue = e.target.value;

            if (newValue !== datetimeInputValue) {
                console.log("Changed from:", datetimeInputValue, "to:", newValue);
                datetimeInputValue = newValue; 

                document.getElementById('dt2gpsResult').innerHTML = '';
            }
        });

        

        var unixMsInputValue = "";
        document.getElementById('unixMsInput').addEventListener('input', function() {
            document.getElementById('dt2gpsResult').innerHTML = '';
        });

        var gpsNsInputValue = "";
        document.getElementById('gpsNsInput').addEventListener('input', function() {
            document.getElementById('gps2dtResult').innerHTML = '';
        });

        // Populate and convert from query string (?t=)
        const timestampParam = new URLSearchParams(window.location.search).get('t');
        if (timestampParam) {
            document.getElementById('gpsNsInput').value = timestampParam;
            convertGpsToDateTime();
        }

        // Allow Enter key to submit conversions
        document.getElementById('datetimeInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                convertDateTimeToGps();
            }
        });

        document.getElementById('unixMsInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                convertUnixMsToGps();
            }
        });

        document.getElementById('gpsNsInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                convertGpsToDateTime();
            }
        });
    </script>
</body>

</html>
